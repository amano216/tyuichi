# 世界の首都クイズアプリ開発ガイド

## プロジェクト概要
このドキュメントは、世界の首都を学習するためのインタラクティブなクイズアプリケーションの開発ガイドです。

## 設計原則

### 1. 可読性（読んでわかる）
- **意味のある命名**: `quizController`, `updateProgressBar`, `checkAnswer`など、機能が一目で分かる名前を使用
- **一貫性のあるフォーマット**: インデント、スペース、改行を統一
- **適切なコメント**: 「なぜ」を説明するコメントのみ記載

### 2. 保守性（変更しやすい）
- **単一責任の原則**: 各関数は1つの役割のみを持つ
- **DRY原則**: 共通処理は関数化（`utils.shuffleArray`, `utils.getScoreFeedback`）
- **疎結合**: モジュール化された構造（`questionBank`, `utils`, `quizController`）

### 3. 単純性（無駄がない）
- **KISS原則**: シンプルで理解しやすいコード
- **YAGNI原則**: 必要な機能のみを実装

## アプリケーション構造

### HTMLファイル構成
```
capital-quiz.html
├── CSS（内部スタイルシート）
│   ├── CSS変数定義
│   ├── 基本スタイル
│   ├── コンポーネントスタイル
│   └── アニメーション定義
├── HTML構造
│   ├── クイズ画面
│   └── 結果画面
└── JavaScript
    ├── 問題データ（questionBank）
    ├── ユーティリティ関数（utils）
    └── クイズ制御（quizController）
```

## 必須機能一覧

### 基本機能
1. **問題表示**: 国名と4つの選択肢を表示
2. **回答処理**: 選択した答えの正誤判定
3. **スコア管理**: 正解数をカウント
4. **進捗表示**: プログレスバーで進捗を可視化

### インタラクティブ機能
1. **スキップボタン**: 分からない問題をスキップ（正解のみ表示）
2. **前へボタン**: 前の問題に戻る（回答状態を保持）
3. **次へボタン**: 次の問題に進む
4. **解説表示**: 回答後に首都の説明を表示

### ビジュアルフィードバック
1. **選択状態**: 選択した選択肢をハイライト
2. **正解表示**: 緑色で正解を表示（✓アイコン付き）
3. **不正解表示**: 赤色で不正解を表示（✗アイコン付き）
4. **アニメーション**: スムーズな画面遷移

## 問題データ形式
```javascript
{
    country: "国名",
    capital: "首都名",
    options: ["選択肢1", "選択肢2", "選択肢3", "選択肢4"],
    explanation: "首都についての説明文"
}
```

## 実装手順

### 1. 基本構造の作成
- HTML構造を定義
- CSS変数で色やサイズを一元管理
- レスポンシブデザインを考慮

### 2. データ構造の定義
- `questionBank`オブジェクトに問題を格納
- カテゴリごとに問題を分類（将来の拡張に備える）

### 3. ユーティリティ関数の実装
- `shuffleArray`: 配列をシャッフル
- `getScoreFeedback`: スコアに応じたフィードバック生成

### 4. クイズロジックの実装
- `initialize`: 初期化処理
- `loadQuestion`: 問題の読み込みと表示
- `checkAnswer`: 回答の判定
- `skipQuestion`: スキップ処理
- `prevQuestion`: 前の問題に戻る
- `nextQuestion`: 次の問題に進む
- `showExplanation`: 解説の表示
- `restorePreviousAnswer`: 前の回答状態を復元

### 5. 状態管理
- `currentQuestionIndex`: 現在の問題番号
- `score`: 正解数
- `userAnswers`: 各問題の回答履歴
- `hasAnswered`: 回答済みフラグ

## 拡張性を考慮した設計

### 新しい地域の追加
```javascript
questionBank.asia = [
    // アジアの問題
];
questionBank.europe = [
    // ヨーロッパの問題
];
```

### 新機能の追加例
- タイマー機能
- 難易度設定
- 学習モード（ヒント表示）
- 成績の保存

## テスト項目
1. 全ての問題が正しく表示されるか
2. 選択肢のシャッフルが機能しているか
3. スコアが正確にカウントされるか
4. 前の問題に戻った際に状態が保持されるか
5. スキップ機能が正しく動作するか
6. レスポンシブデザインが機能しているか

## パフォーマンス最適化
- CSS変数による一元管理
- イベントリスナーの効率的な使用
- DOM操作の最小化
- アニメーションの適切な使用

## まとめ
このアプリケーションは、シンプルで保守性の高い構造を持ち、将来的な機能拡張にも対応できる設計となっています。コードの可読性を重視し、誰でも理解・修正できることを目標としています。