<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‰∏ñÁïå„ÅÆÈ¶ñÈÉΩ„ÇØ„Ç§„Ç∫ - „Ç¢„Éï„É™„Ç´„ÉªË•ø„Ç¢„Ç∏„Ç¢Á∑®</title>
    <style>
        :root {
            --primary-color: #667eea;
            --primary-gradient-end: #764ba2;
            --success-color: #4ade80;
            --error-color: #f87171;
            --bg-white: rgba(255, 255, 255, 0.95);
            --text-primary: #333;
            --text-secondary: #666;
            --hover-bg: #e8e8e8;
            --option-bg: #f5f5f5;
            --border-radius: 12px;
            --transition-speed: 0.3s;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-gradient-end) 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-primary);
        }

        .quiz-container {
            background: var(--bg-white);
            border-radius: 20px;
            padding: 2rem;
            max-width: 600px;
            width: 90%;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .quiz-title {
            text-align: center;
            color: var(--primary-color);
            margin-bottom: 2rem;
            font-size: 1.8rem;
        }

        .progress-container {
            height: 8px;
            background: #e0e0e0;
            border-radius: 10px;
            margin-bottom: 2rem;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--primary-gradient-end));
            border-radius: 10px;
            transition: width var(--transition-speed) ease;
            width: 0%;
        }

        .question-section {
            margin-bottom: 2rem;
        }

        .question-counter {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .question-text {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            color: var(--text-primary);
        }

        .options-container {
            display: grid;
            gap: 0.8rem;
        }

        .option-button {
            background: var(--option-bg);
            border: 2px solid transparent;
            border-radius: var(--border-radius);
            padding: 1rem 1.5rem;
            cursor: pointer;
            transition: all var(--transition-speed) ease;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            text-align: left;
        }

        .option-button:hover:not(.disabled) {
            background: var(--hover-bg);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .option-button.selected {
            border-color: var(--primary-color);
            background: #f0f4ff;
        }

        .option-button.correct {
            border-color: var(--success-color);
            background: #e6ffed;
            animation: correctAnswer 0.5s ease;
        }

        .option-button.incorrect {
            border-color: var(--error-color);
            background: #ffeded;
            animation: wrongAnswer 0.5s ease;
        }

        .option-button.disabled {
            cursor: not-allowed;
            opacity: 0.8;
        }

        .option-text {
            display: flex;
            align-items: center;
        }

        .option-label {
            font-weight: 600;
            margin-right: 0.5rem;
            color: var(--primary-color);
        }

        .feedback-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: none;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
        }

        .feedback-icon.visible {
            display: flex;
        }

        .feedback-icon.correct {
            background: var(--success-color);
        }

        .feedback-icon.incorrect {
            background: var(--error-color);
        }

        .answer-explanation {
            margin-top: 1.5rem;
            padding: 1rem;
            background: #f0f4ff;
            border-radius: var(--border-radius);
            border-left: 4px solid var(--primary-color);
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .answer-explanation.visible {
            display: block;
        }

        .answer-explanation h3 {
            margin: 0 0 0.5rem 0;
            color: var(--primary-color);
            font-size: 1.1rem;
        }

        .answer-explanation p {
            margin: 0;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .button-container {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }

        .action-button {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-gradient-end));
            color: white;
            border: none;
            border-radius: var(--border-radius);
            padding: 1rem 2rem;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            flex: 1;
            transition: all var(--transition-speed) ease;
            opacity: 0;
            pointer-events: none;
        }

        .action-button.visible {
            opacity: 1;
            pointer-events: all;
        }

        #skipButton {
            background: linear-gradient(135deg, #94a3b8, #64748b);
        }

        #prevButton {
            background: linear-gradient(135deg, #6b7280, #4b5563);
        }

        .action-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
        }

        .result-container {
            text-align: center;
            display: none;
        }

        .final-score {
            font-size: 3rem;
            font-weight: bold;
            color: var(--primary-color);
            margin: 1rem 0;
        }

        .result-feedback {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 2rem;
        }

        @keyframes correctAnswer {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes wrongAnswer {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 480px) {
            .quiz-container {
                padding: 1.5rem;
            }
            .quiz-title {
                font-size: 1.5rem;
            }
            .question-text {
                font-size: 1.1rem;
            }
            .option-button {
                font-size: 1rem;
                padding: 0.8rem 1.2rem;
            }
        }
    </style>
</head>
<body>
    <div class="quiz-container">
        <h1 class="quiz-title">‰∏ñÁïå„ÅÆÈ¶ñÈÉΩ„ÇØ„Ç§„Ç∫ üåç</h1>
        
        <div class="quiz-view">
            <div class="progress-container">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            
            <div class="question-section">
                <div class="question-counter">
                    ÂïèÈ°å <span id="currentQuestionNumber">1</span> / <span id="totalQuestions">20</span>
                </div>
                <div class="question-text" id="questionText"></div>
                
                <div class="options-container" id="optionsContainer"></div>
                
                <div class="answer-explanation" id="answerExplanation"></div>
            </div>
            
            <div class="button-container">
                <button class="action-button" id="prevButton" onclick="quizController.prevQuestion()">Ââç„Å∏</button>
                <button class="action-button" id="skipButton" onclick="quizController.skipQuestion()">„Çπ„Ç≠„ÉÉ„Éó</button>
                <button class="action-button" id="nextButton" onclick="quizController.nextQuestion()">Ê¨°„Å∏</button>
            </div>
        </div>
        
        <div class="result-container" id="resultView">
            <h2>„ÇØ„Ç§„Ç∫ÂÆå‰∫ÜÔºÅ</h2>
            <div class="final-score">
                <span id="scoreNumber">0</span> / <span id="totalNumber">20</span>
            </div>
            <div class="result-feedback" id="resultFeedback"></div>
            <button class="action-button visible" onclick="quizController.restart()">„ÇÇ„ÅÜ‰∏ÄÂ∫¶ÊåëÊà¶</button>
        </div>
    </div>

    <script>
        // ÂïèÈ°å„Éá„Éº„Çø„ÅÆÁÆ°ÁêÜ
        const questionBank = {
            africaWestAsia: [
                // Âåó„ÉªË•ø„Ç¢„Éï„É™„Ç´
                { country: "„Ç®„Ç∏„Éó„Éà", capital: "„Ç´„Ç§„É≠", options: ["„Ç´„Ç§„É≠", "„Ç¢„É¨„ÇØ„Çµ„É≥„Éâ„É™„Ç¢", "„É´„ÇØ„ÇΩ„Éº„É´", "„Ç¢„Çπ„ÉØ„É≥"], explanation: "„Ç´„Ç§„É≠„ÅØ„Ç®„Ç∏„Éó„Éà„ÅÆÈ¶ñÈÉΩ„Åß„ÄÅ‰∫∫Âè£Á¥Ñ1000‰∏á‰∫∫„ÅÆÂ§ßÈÉΩÂ∏Ç„Åß„Åô„ÄÇ„Éî„É©„Éü„ÉÉ„Éâ„ÅßÊúâÂêç„Å™„ÇÆ„Ç∂„ÇÇ„Ç´„Ç§„É≠ÈÉΩÂ∏ÇÂúè„Å´Âê´„Åæ„Çå„Åæ„Åô„ÄÇ" },
                { country: "„É™„Éì„Ç¢", capital: "„Éà„É™„Éù„É™", options: ["„Éà„É™„Éù„É™", "„Éô„É≥„Ç¨„Ç∏", "„Éü„Çπ„É©„Çø", "„Éà„Éñ„É´„ÇØ"], explanation: "„Éà„É™„Éù„É™„ÅØÂú∞‰∏≠Êµ∑„Å´Èù¢„Åó„Åü„É™„Éì„Ç¢„ÅÆÈ¶ñÈÉΩ„Åß„Åô„ÄÇÂè§‰ª£„É≠„Éº„ÉûÊôÇ‰ª£„Åã„ÇâÈáçË¶Å„Å™Ê∏ØÊπæÈÉΩÂ∏Ç„Åß„Åó„Åü„ÄÇ" },
                { country: "„Ç¢„É´„Ç∏„Çß„É™„Ç¢", capital: "„Ç¢„É´„Ç∏„Çß", options: ["„Ç¢„É´„Ç∏„Çß", "„Ç™„É©„É≥", "„Ç≥„É≥„Çπ„Çø„É≥„ÉÜ„Ç£„Éº„Éå", "„Ç¢„É≥„Éä„Éê"], explanation: "„Ç¢„É´„Ç∏„Çß„ÅØ„Ç¢„É´„Ç∏„Çß„É™„Ç¢„ÅÆÈ¶ñÈÉΩ„Åß„ÄÅÂú∞‰∏≠Êµ∑„Å´Èù¢„Åó„ÅüÁæé„Åó„ÅÑÁôΩ„ÅÑÂª∫Áâ©„ÅåÁâπÂæ¥ÁöÑ„Å™ÈÉΩÂ∏Ç„Åß„Åô„ÄÇ" },
                { country: "„É¢„É≠„ÉÉ„Ç≥", capital: "„É©„Éê„Éà", options: ["„É©„Éê„Éà", "„Ç´„Çµ„Éñ„É©„É≥„Ç´", "„Éû„É©„Ç±„Ç∑„É•", "„Éï„Çß„Ç∫"], explanation: "„É©„Éê„Éà„ÅØ„É¢„É≠„ÉÉ„Ç≥„ÅÆÈ¶ñÈÉΩ„Åß„Åô„ÄÇ„Ç´„Çµ„Éñ„É©„É≥„Ç´„ÅÆÊñπ„ÅåÊúâÂêç„Åß„Åô„Åå„ÄÅÊîøÊ≤ª„ÅÆ‰∏≠ÂøÉ„ÅØ„É©„Éê„Éà„Å´„ÅÇ„Çä„Åæ„Åô„ÄÇ" },
                { country: "„Çª„Éç„Ç¨„É´", capital: "„ÉÄ„Ç´„Éº„É´", options: ["„ÉÄ„Ç´„Éº„É´", "„ÉÜ„Ç£„Ç®„Çπ", "„Çµ„É≥„É´„Ç§", "„Ç∏„Ç¨„É≥„Ç∑„Éß„Éº„É´"] },
                { country: "„É™„Éô„É™„Ç¢", capital: "„É¢„É≥„É≠„Éì„Ç¢", options: ["„É¢„É≥„É≠„Éì„Ç¢", "„Éè„Éº„Éë„Éº", "„Éñ„Ç≠„É£„Éä„É≥", "„Ç∞„Éê„É≥„Ç¨"] },
                { country: "„Ç≥„Éº„Éà„Ç∏„Éú„ÉØ„Éº„É´", capital: "„É§„É†„Çπ„ÇØ„É≠", options: ["„É§„É†„Çπ„ÇØ„É≠", "„Ç¢„Éì„Ç∏„É£„É≥", "„Éñ„Ç¢„Ç±", "„ÉÄ„É≠„Ç¢"] },
                { country: "„Ç¨„Éº„Éä", capital: "„Ç¢„ÇØ„É©", options: ["„Ç¢„ÇØ„É©", "„ÇØ„Éû„Ç∑", "„Çø„Éû„É¨", "„Çª„Ç≥„É≥„Éá„Ç£"] },
                { country: "„Éä„Ç§„Ç∏„Çß„É™„Ç¢", capital: "„Ç¢„Éñ„Ç∏„É£", options: ["„Ç¢„Éñ„Ç∏„É£", "„É©„Ç¥„Çπ", "„Ç´„Éé", "„Ç§„Éê„ÉÄ„É≥"] },
                { country: "„Çπ„Éº„ÉÄ„É≥", capital: "„Éè„É´„ÉÑ„Éº„É†", options: ["„Éè„É´„ÉÑ„Éº„É†", "„Ç™„É†„Éâ„Ç•„É´„Éû„É≥", "„Éù„Éº„Éà„Çπ„Éº„ÉÄ„É≥", "„Ç´„ÉÉ„Çµ„É©"] },
                { country: "Âçó„Çπ„Éº„ÉÄ„É≥", capital: "„Ç∏„É•„Éê", options: ["„Ç∏„É•„Éê", "„ÉØ„Ç¶", "„Éû„É©„Ç´„É´", "„Éú„É´"] },
                
                // Êù±„ÉªÂçó„Ç¢„Éï„É™„Ç´
                { country: "„Ç®„ÉÅ„Ç™„Éî„Ç¢", capital: "„Ç¢„Éá„Ç£„Çπ„Ç¢„Éô„Éê", options: ["„Ç¢„Éá„Ç£„Çπ„Ç¢„Éô„Éê", "„Éá„Ç£„É¨„ÉÄ„ÉØ", "„É°„Ç±„É¨", "„Ç¥„É≥„ÉÄ„Éº„É´"] },
                { country: "„ÇΩ„Éû„É™„Ç¢", capital: "„É¢„Ç¨„Éá„Ç£„Ç∑„É•", options: ["„É¢„Ç¨„Éá„Ç£„Ç∑„É•", "„Éè„É´„Ç≤„Ç§„Çµ", "„Ç≠„Çπ„Éû„É®", "„Éú„Çµ„ÇΩ"] },
                { country: "„Ç±„Éã„Ç¢", capital: "„Éä„Ç§„É≠„Éì", options: ["„Éä„Ç§„É≠„Éì", "„É¢„É≥„Éê„Çµ", "„Ç≠„Çπ„É†", "„Éä„ÇØ„É´"] },
                { country: "„Çø„É≥„Ç∂„Éã„Ç¢", capital: "„ÉÄ„É´„Ç®„Çπ„Çµ„É©„Éº„É†", options: ["„ÉÄ„É´„Ç®„Çπ„Çµ„É©„Éº„É†", "„Éâ„Éâ„Éû", "„Ç¢„É´„Éº„Ç∑„É£", "„É†„ÉØ„É≥„Ç∂"] },
                { country: "„Ç≥„É≥„Ç¥Ê∞ë‰∏ªÂÖ±ÂíåÂõΩ", capital: "„Ç≠„É≥„Ç∑„É£„Çµ", options: ["„Ç≠„É≥„Ç∑„É£„Çµ", "„É´„Éñ„É≥„Éê„Ç∑", "„Ç¥„Éû", "„Ç≠„Çµ„É≥„Ç¨„Éã"] },
                { country: "„Ç¶„Ç¨„É≥„ÉÄ", capital: "„Ç´„É≥„Éë„É©", options: ["„Ç´„É≥„Éë„É©", "„Ç∞„É´", "„Ç∏„É≥„Ç∏„É£", "„É†„Éê„É¨"] },
                { country: "„Ç∂„É≥„Éì„Ç¢", capital: "„É´„Çµ„Ç´", options: ["„É´„Çµ„Ç´", "„Ç≠„Éà„Ç¶„Çß", "„É≥„Éâ„É©", "„Ç´„Éñ„Ç¶„Çß"] },
                { country: "„É¢„Ç∂„É≥„Éì„Éº„ÇØ", capital: "„Éû„Éó„Éà", options: ["„Éû„Éó„Éà", "„Éô„Ç§„É©", "„Éä„É≥„Éó„É©", "„ÉÜ„ÉÜ"] },
                { country: "„Éû„ÉÄ„Ç¨„Çπ„Ç´„É´", capital: "„Ç¢„É≥„Çø„Éä„Éä„É™„Éú", options: ["„Ç¢„É≥„Çø„Éä„Éä„É™„Éú", "„Éà„Ç¢„Éû„Ç∑„Éä", "„Ç¢„É≥„ÉÑ„Ç£„É©„Éä„Éä", "„Éï„Ç£„Ç¢„Éä„É©„É≥„ÉÑ„Ç©„Ç¢"] },
                { country: "Âçó„Ç¢„Éï„É™„Ç´ÂÖ±ÂíåÂõΩ", capital: "„Éó„É¨„Éà„É™„Ç¢", options: ["„Éó„É¨„Éà„É™„Ç¢", "„Ç±„Éº„Éó„Çø„Ç¶„É≥", "„É®„Éè„Éç„Çπ„Éñ„É´„Ç∞", "„ÉÄ„Éº„Éê„É≥"] },
                
                // Ë•ø„Ç¢„Ç∏„Ç¢
                { country: "„Éà„É´„Ç≥", capital: "„Ç¢„É≥„Ç´„É©", options: ["„Ç¢„É≥„Ç´„É©", "„Ç§„Çπ„Çø„É≥„Éñ„Éº„É´", "„Ç§„Ç∫„Éü„É´", "„Éñ„É´„Çµ"] },
                { country: "„Ç∑„É™„Ç¢", capital: "„ÉÄ„Éû„Çπ„Ç´„Çπ", options: ["„ÉÄ„Éû„Çπ„Ç´„Çπ", "„Ç¢„É¨„ÉÉ„Éù", "„Éõ„É†„Çπ", "„É©„Çø„Ç≠„Ç¢"] },
                { country: "„Ç§„Çπ„É©„Ç®„É´", capital: "„Ç®„É´„Çµ„É¨„É†", options: ["„Ç®„É´„Çµ„É¨„É†", "„ÉÜ„É´„Ç¢„Éì„Éñ", "„Éè„Ç§„Éï„Ç°", "„Éô„Ç®„É´„Ç∑„Çß„Éê"] },
                { country: "„Ç§„É©„ÇØ", capital: "„Éê„Ç∞„ÉÄ„ÉÉ„Éâ", options: ["„Éê„Ç∞„ÉÄ„ÉÉ„Éâ", "„Éê„Çπ„É©", "„É¢„Çπ„É´", "„Ç®„É´„Éì„É´"] },
                { country: "„Çµ„Ç¶„Ç∏„Ç¢„É©„Éì„Ç¢", capital: "„É™„É§„Éâ", options: ["„É™„É§„Éâ", "„Ç∏„ÉÉ„ÉÄ", "„É°„ÉÉ„Ç´", "„É°„Éá„Ç£„Éä"] },
                { country: "UAEÔºà„Ç¢„É©„ÉñÈ¶ñÈï∑ÂõΩÈÄ£ÈÇ¶Ôºâ", capital: "„Ç¢„Éñ„ÉÄ„Éì", options: ["„Ç¢„Éñ„ÉÄ„Éì", "„Éâ„Éê„Ç§", "„Ç∑„É£„É´„Ç∏„É£", "„Ç¢„Ç∏„É•„Éû„É≥"] },
                { country: "„Ç§„É©„É≥", capital: "„ÉÜ„Éò„É©„É≥", options: ["„ÉÜ„Éò„É©„É≥", "„Éû„Ç∑„É•„Éè„Éâ", "„Ç§„Çπ„Éï„Ç°„Éè„É≥", "„Çø„Éñ„É™„Éº„Ç∫"], explanation: "„ÉÜ„Éò„É©„É≥„ÅØ„Ç§„É©„É≥„ÅÆÈ¶ñÈÉΩ„Åß„ÄÅ‰∫∫Âè£Á¥Ñ900‰∏á‰∫∫„ÅÆÂ§ßÈÉΩÂ∏Ç„Åß„Åô„ÄÇ„Ç®„É´„Éñ„É´„Ç∫Â±±ËÑà„ÅÆÂçóÈ∫ì„Å´‰ΩçÁΩÆ„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ" },
                { country: "„Ç™„Éû„Éº„É≥", capital: "„Éû„Çπ„Ç´„ÉÉ„Éà", options: ["„Éû„Çπ„Ç´„ÉÉ„Éà", "„Çµ„É©„Éº„É©", "„Éã„Ç∫„ÉØ", "„Çπ„Éº„É´"] }
            ]
        };

        // „É¶„Éº„ÉÜ„Ç£„É™„ÉÜ„Ç£Èñ¢Êï∞
        const utils = {
            shuffleArray: function(array) {
                const newArray = [...array];
                for (let i = newArray.length - 1; i > 0; i--) {
                    const randomIndex = Math.floor(Math.random() * (i + 1));
                    [newArray[i], newArray[randomIndex]] = [newArray[randomIndex], newArray[i]];
                }
                return newArray;
            },

            getScoreFeedback: function(score, total) {
                const percentage = (score / total) * 100;
                
                if (percentage === 100) {
                    return 'ÂÆåÁíß„Åß„ÅôÔºÅÂÖ®ÂïèÊ≠£Ëß£„Åä„ÇÅ„Åß„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„ÅôÔºÅüéâ';
                } else if (percentage >= 80) {
                    return 'Á¥†Êô¥„Çâ„Åó„ÅÑÔºÅ„Çà„ÅèÈ†ëÂºµ„Çä„Åæ„Åó„ÅüÔºÅüåü';
                } else if (percentage >= 60) {
                    return '„ÅÑ„ÅÑË™øÂ≠ê„Åß„ÅôÔºÅ„ÇÇ„ÅÜÂ∞ë„Åó„ÅßÂÆåÁíß„Åß„ÅôÔºÅüëç';
                } else if (percentage >= 40) {
                    return '„Åæ„Å†„Åæ„Å†‰º∏„Å≥„Åó„Çç„Åå„ÅÇ„Çä„Åæ„ÅôÔºÅÈ†ëÂºµ„Å£„Å¶ÔºÅüí™';
                } else {
                    return '„ÇÇ„ÅÜ‰∏ÄÂ∫¶„ÉÅ„É£„É¨„É≥„Ç∏„Åó„Å¶„Åø„Åæ„Åó„Çá„ÅÜÔºÅüìö';
                }
            }
        };

        // „ÇØ„Ç§„Ç∫„É≠„Ç∏„ÉÉ„ÇØ„ÅÆÁÆ°ÁêÜ
        const quizController = {
            currentQuestionIndex: 0,
            score: 0,
            questions: [],
            hasAnswered: false,
            userAnswers: [],

            initialize: function() {
                this.questions = utils.shuffleArray([...questionBank.africaWestAsia]);
                this.currentQuestionIndex = 0;
                this.score = 0;
                this.userAnswers = [];
                this.loadQuestion();
                this.updateUI();
            },

            loadQuestion: function() {
                const question = this.questions[this.currentQuestionIndex];
                const shuffledOptions = utils.shuffleArray(question.options);
                
                // Ë≥™ÂïèÊñá„ÇíÊõ¥Êñ∞
                document.getElementById('questionText').textContent = 
                    `„Äå${question.country}„Äç„ÅÆÈ¶ñÈÉΩ„ÅØ„Å©„Åì„Åß„Åô„ÅãÔºü`;
                
                // ÈÅ∏ÊäûËÇ¢„ÇíÁîüÊàê
                const optionsContainer = document.getElementById('optionsContainer');
                optionsContainer.innerHTML = '';
                
                shuffledOptions.forEach((option, index) => {
                    const optionButton = this.createOptionElement(option, index, question.capital);
                    optionsContainer.appendChild(optionButton);
                });
                
                // UI„Çí„É™„Çª„ÉÉ„Éà
                this.hasAnswered = false;
                document.getElementById('nextButton').classList.remove('visible');
                document.getElementById('skipButton').classList.add('visible');
                document.getElementById('prevButton').classList.toggle('visible', this.currentQuestionIndex > 0);
                document.getElementById('answerExplanation').classList.remove('visible');
                document.getElementById('answerExplanation').innerHTML = '';
                this.updateProgressBar();
                
                // ‰ª•Ââç„ÅÆÂõûÁ≠î„ÇíÂæ©ÂÖÉ
                if (this.userAnswers[this.currentQuestionIndex]) {
                    this.restorePreviousAnswer();
                }
            },

            createOptionElement: function(option, index, correctAnswer) {
                const button = document.createElement('button');
                button.className = 'option-button';
                button.onclick = () => this.selectOption(button, option);
                
                const optionText = document.createElement('div');
                optionText.className = 'option-text';
                optionText.innerHTML = `
                    <span class="option-label">${String.fromCharCode(65 + index)}.</span>
                    <span>${option}</span>
                `;
                
                const feedbackIcon = document.createElement('div');
                feedbackIcon.className = 'feedback-icon';
                feedbackIcon.innerHTML = option === correctAnswer ? '‚úì' : '‚úó';
                
                button.appendChild(optionText);
                button.appendChild(feedbackIcon);
                
                return button;
            },

            selectOption: function(element, selectedAnswer) {
                if (this.hasAnswered) return;
                
                // ÈÅ∏ÊäûÁä∂ÊÖã„ÇíÊõ¥Êñ∞
                document.querySelectorAll('.option-button').forEach(btn => {
                    btn.classList.remove('selected');
                });
                element.classList.add('selected');
                
                // Á≠î„ÅàÂêà„Çè„Åõ
                this.checkAnswer(selectedAnswer);
            },

            checkAnswer: function(selectedAnswer) {
                this.hasAnswered = true;
                const currentQuestion = this.questions[this.currentQuestionIndex];
                const isCorrect = selectedAnswer === currentQuestion.capital;
                
                // ÂõûÁ≠î„Çí‰øùÂ≠ò
                this.userAnswers[this.currentQuestionIndex] = {
                    answer: selectedAnswer,
                    isCorrect: isCorrect,
                    wasSkipped: false
                };
                
                if (isCorrect && !this.userAnswers[this.currentQuestionIndex].counted) {
                    this.score++;
                    this.userAnswers[this.currentQuestionIndex].counted = true;
                }
                
                // ÂÖ®„Å¶„ÅÆÈÅ∏ÊäûËÇ¢„ÇíÁÑ°ÂäπÂåñ„Åó„ÄÅÁµêÊûú„ÇíË°®Á§∫
                document.querySelectorAll('.option-button').forEach(button => {
                    button.classList.add('disabled');
                    const optionText = button.querySelector('span:not(.option-label)').textContent;
                    const icon = button.querySelector('.feedback-icon');
                    
                    if (optionText === currentQuestion.capital) {
                        button.classList.add('correct');
                        icon.classList.add('correct', 'visible');
                    } else if (button.classList.contains('selected')) {
                        button.classList.add('incorrect');
                        icon.classList.add('incorrect', 'visible');
                    }
                });
                
                // Ëß£Ë™¨„ÇíË°®Á§∫
                this.showExplanation();
                
                // Ê¨°„Å∏„Éú„Çø„É≥„ÇíË°®Á§∫„ÄÅ„Çπ„Ç≠„ÉÉ„Éó„Éú„Çø„É≥„ÇíÈùûË°®Á§∫
                document.getElementById('nextButton').classList.add('visible');
                document.getElementById('skipButton').classList.remove('visible');
            },

            nextQuestion: function() {
                this.currentQuestionIndex++;
                
                if (this.currentQuestionIndex < this.questions.length) {
                    this.loadQuestion();
                    this.updateUI();
                } else {
                    this.showResult();
                }
            },

            skipQuestion: function() {
                // „Çπ„Ç≠„ÉÉ„Éó„Åó„ÅüÂ†¥Âêà„ÅØÊ≠£Ëß£„ÇíË°®Á§∫
                const currentQuestion = this.questions[this.currentQuestionIndex];
                
                // ÂõûÁ≠î„Çí‰øùÂ≠ò
                this.userAnswers[this.currentQuestionIndex] = {
                    answer: null,
                    isCorrect: false,
                    wasSkipped: true
                };
                
                // ÂÖ®„Å¶„ÅÆÈÅ∏ÊäûËÇ¢„ÇíÁÑ°ÂäπÂåñ„Åó„ÄÅÊ≠£Ëß£„ÇíË°®Á§∫
                document.querySelectorAll('.option-button').forEach(button => {
                    button.classList.add('disabled');
                    const optionText = button.querySelector('span:not(.option-label)').textContent;
                    const icon = button.querySelector('.feedback-icon');
                    
                    if (optionText === currentQuestion.capital) {
                        button.classList.add('correct');
                        icon.classList.add('correct', 'visible');
                    }
                });
                
                // Ëß£Ë™¨„ÇíË°®Á§∫
                this.showExplanation();
                
                // Ê¨°„Å∏„Éú„Çø„É≥„ÇíË°®Á§∫„ÄÅ„Çπ„Ç≠„ÉÉ„Éó„Éú„Çø„É≥„ÇíÈùûË°®Á§∫
                document.getElementById('nextButton').classList.add('visible');
                document.getElementById('skipButton').classList.remove('visible');
                this.hasAnswered = true;
            },

            prevQuestion: function() {
                if (this.currentQuestionIndex > 0) {
                    this.currentQuestionIndex--;
                    this.loadQuestion();
                    this.updateUI();
                }
            },

            showExplanation: function() {
                const currentQuestion = this.questions[this.currentQuestionIndex];
                const explanation = currentQuestion.explanation || `${currentQuestion.capital}„ÅØ${currentQuestion.country}„ÅÆÈ¶ñÈÉΩ„Åß„Åô„ÄÇ`;
                
                const explanationEl = document.getElementById('answerExplanation');
                explanationEl.innerHTML = `
                    <h3>Ëß£Ë™¨</h3>
                    <p>${explanation}</p>
                `;
                explanationEl.classList.add('visible');
            },

            restorePreviousAnswer: function() {
                const answer = this.userAnswers[this.currentQuestionIndex];
                const currentQuestion = this.questions[this.currentQuestionIndex];
                
                // ÈÅ∏ÊäûËÇ¢„ÇíÁÑ°ÂäπÂåñ„Åó„ÄÅÂâç„ÅÆÂõûÁ≠îÁä∂ÊÖã„ÇíÂæ©ÂÖÉ
                document.querySelectorAll('.option-button').forEach(button => {
                    button.classList.add('disabled');
                    const optionText = button.querySelector('span:not(.option-label)').textContent;
                    const icon = button.querySelector('.feedback-icon');
                    
                    if (optionText === currentQuestion.capital) {
                        button.classList.add('correct');
                        icon.classList.add('correct', 'visible');
                    } else if (answer.answer === optionText) {
                        button.classList.add('selected', 'incorrect');
                        icon.classList.add('incorrect', 'visible');
                    }
                });
                
                // Ëß£Ë™¨„ÇíË°®Á§∫
                this.showExplanation();
                
                // „Éú„Çø„É≥„ÅÆÁä∂ÊÖã„ÇíË®≠ÂÆö
                document.getElementById('nextButton').classList.add('visible');
                document.getElementById('skipButton').classList.remove('visible');
                this.hasAnswered = true;
            },

            updateUI: function() {
                document.getElementById('currentQuestionNumber').textContent = 
                    this.currentQuestionIndex + 1;
                document.getElementById('totalQuestions').textContent = 
                    this.questions.length;
            },

            updateProgressBar: function() {
                const progress = ((this.currentQuestionIndex + 1) / this.questions.length) * 100;
                document.getElementById('progressBar').style.width = progress + '%';
            },

            showResult: function() {
                document.querySelector('.quiz-view').style.display = 'none';
                document.getElementById('resultView').style.display = 'block';
                
                document.getElementById('scoreNumber').textContent = this.score;
                document.getElementById('totalNumber').textContent = this.questions.length;
                document.getElementById('resultFeedback').textContent = 
                    utils.getScoreFeedback(this.score, this.questions.length);
            },

            restart: function() {
                document.querySelector('.quiz-view').style.display = 'block';
                document.getElementById('resultView').style.display = 'none';
                this.initialize();
            }
        };

        // „Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„ÅÆÈñãÂßã
        document.addEventListener('DOMContentLoaded', function() {
            quizController.initialize();
        });
    </script>
</body>
</html>